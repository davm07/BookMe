{% extends "base.html" %}

{% block title %} Welcome, {{ user.username }} {% endblock %}

{% block content %}
<section class="mt-4">
    <h1 class="custom-title">Your favorite books</h1>
    {% if my_books %}
    <div class="favorite-books">
        {% for book in my_books %}
        <div class="favorite-book">
            <h2>{{book.volumeInfo.title|truncatewords:10}}</h2>
            {% if book.volumeInfo.authors %}
            <p><b>Author(s):</b> {{book.volumeInfo.authors|join:", " }}</p>
            {% else %}
            <p><b>Author(s):</b> Unknown</p>
            {% endif %}
            {% if book.volumeInfo.imageLinks.thumbnail %}
            <img src="{{book.volumeInfo.imageLinks.thumbnail}}" alt="Book cover {{book.volumeInfo.title}}" class="img-fluid" width="150" height="200">
            {% else %}
            <p>No cover available</p>
            {% endif %}
            <a href="{% url 'book_detail' book.id %}" class="btn btn-favorites">See book details &#8599;</a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p>You don't have any favorite books yet</p>
    {% endif %}
</section>
{% endblock content %}

